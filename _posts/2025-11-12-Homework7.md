---
title: "Homework 7: Random Walk of Server Security"
layout: post
date: 2025-11-12
---

## Random Walk Interpretation of Server Security

A server faces weekly security updates for `n` weeks, with `m` attackers each week.  
Each attacker breaches independently with probability `p`.  
If the server remains secure in a week → **+1**, if breached → **–1**.  
We simulate many trajectories of the server’s cumulative score and compare the empirical final-score distribution with the theoretical Binomial prediction.

---

### Interactive Simulation

Set parameters and visualize how cumulative-score paths and the final-score distribution behave.

```html
<div style="margin-bottom:10px;">
  <label>Weeks (n): </label><input id="weeks" type="number" value="20" min="1" max="200" step="1" style="width:60px;margin-right:15px;">
  <label>Attackers per week (m): </label><input id="attackers" type="number" value="3" min="1" max="100" step="1" style="width:60px;margin-right:15px;">
  <label>Success probability (p): </label><input id="prob" type="number" value="0.05" min="0" max="1" step="0.01" style="width:60px;margin-right:15px;">
  <label>Simulations: </label><input id="sims" type="number" value="20000" min="100" max="1000000" step="100" style="width:80px;margin-right:15px;">
  <label>Paths to show: </label><input id="paths" type="number" value="10" min="1" max="100" step="1" style="width:60px;margin-right:15px;">
  <button id="runSim">Run Simulation</button>
</div>

<div id="rw-trajectories" style="height:400px;"></div>
<div style="margin-top:40px;">
  <h3>Distribution of Final Scores</h3>
  <div id="rw-dist" style="height:400px;"></div>
</div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
(function() {
  function binomial(n, k) {
    if (k < 0 || k > n) return 0;
    let res = 1;
    for (let i = 1; i <= k; i++) res *= (n - (k - i)) / i;
    return res;
  }

  function theoreticalDistribution(n, m, p) {
    const q = 1 - Math.pow(1 - p, m);
    const dist = [];
    for (let k = 0; k <= n; k++) {
      const score = n - 2 * k;
      const prob = binomial(n, k) * Math.pow(q, k) * Math.pow(1 - q, n - k);
      dist.push({ score, prob });
    }
    return dist;
  }

  function simulatePaths(n, m, p, Nsim, Npaths) {
    const q = 1 - Math.pow(1 - p, m);
    const counts = new Map();
    const trajectories = [];
    for (let i = 0; i < Nsim; i++) {
      let score = 0;
      const path = [];
      for (let t = 0; t < n; t++) {
        score += (Math.random() < q) ? -1 : 1;
        if (i < Npaths) path.push(score);
      }
      counts.set(score, (counts.get(score) || 0) + 1);
      if (i < Npaths) trajectories.push(path);
    }
    const dist = [];
    for (let s = -n; s <= n; s += 2)
      dist.push({ score: s, freq: (counts.get(s) || 0) / Nsim });
    return { trajectories, dist };
  }

  function plotTrajectories(trajs) {
    const traces = trajs.map(path => ({
      x: Array.from({length: path.length}, (_, i) => i + 1),
      y: path,
      mode: "lines",
      line: { width: 1 },
      hoverinfo: "none"
    }));
    const layout = {
      title: "Cumulative Score Trajectories",
      xaxis: { title: "Week" },
      yaxis: { title: "Cumulative Score" },
      plot_bgcolor: "white",
      paper_bgcolor: "white",
      font: { color: "black" }
    };
    Plotly.newPlot("rw-trajectories", traces, layout);
  }

  function plotDistribution(sim, theo, n, m, p, Nsim) {
    const simTrace = {
      x: sim.map(d => d.score),
      y: sim.map(d => d.freq),
      type: "bar",
      name: "Simulated Frequencies",
      marker: { color: "rgba(30,144,255,0.7)" }
    };

    const theoTrace = {
      x: theo.map(d => d.score),
      y: theo.map(d => d.prob),
      mode: "markers",
      marker: { color: "red", size: 8, symbol: "circle-open" },
      line: { color: "red", width: 2 },
      name: "Theoretical Binomial"
    };

    const layout = {
      title: `Distribution of Final Scores (n=${n}, m=${m}, p=${p}, sims=${Nsim})`,
      xaxis: { title: "Total Score (S = n - 2b)" },
      yaxis: { title: "Probability" },
      barmode: "overlay",
      plot_bgcolor: "white",
      paper_bgcolor: "white",
      font: { color: "black" }
    };

    Plotly.newPlot("rw-dist", [simTrace, theoTrace], layout);
  }

  function run() {
    const n = +document.getElementById("weeks").value;
    const m = +document.getElementById("attackers").value;
    const p = +document.getElementById("prob").value;
    const Nsim = +document.getElementById("sims").value;
    const Npaths = +document.getElementById("paths").value;

    const { trajectories, dist } = simulatePaths(n, m, p, Nsim, Npaths);
    plotTrajectories(trajectories);
    plotDistribution(dist, theoreticalDistribution(n, m, p), n, m, p, Nsim);
  }

  document.getElementById("runSim").onclick = run;
  run();
})();
</script>
