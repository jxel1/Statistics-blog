---
title: "Interactive Simulation of the Law of Large Numbers (LLN)"
layout: post
date: 2025-10-25
---

## Law of Large Numbers (LLN) — Interactive Simulation

The **Law of Large Numbers (LLN)** states that as the number of trials in a random experiment increases, the observed relative frequency of an event converges to its true probability.

This interactive visualization simulates repeated **Bernoulli trials** with success probability `p` and shows how the **relative frequency** across many sample paths converges toward `p` as the number of trials grows.

---

### Interactive Chart with User Inputs

You can set your own parameters (`p`, `n`, `m`) and observe the effect on convergence in real time.

```html
<div style="margin-bottom: 10px; color: white;">
  <label for="prob">Probability p:</label>
  <input id="prob" type="number" min="0" max="1" step="0.01" value="0.5" style="width:60px; margin-right:20px;">
  
  <label for="trials"># Trials n:</label>
  <input id="trials" type="number" min="10" max="5000" step="10" value="1000" style="width:80px; margin-right:20px;">
  
  <label for="paths"># Paths m:</label>
  <input id="paths" type="number" min="10" max="1000" step="10" value="200" style="width:80px; margin-right:20px;">
  
  <button id="generate" style="padding:5px 10px;">Generate</button>
</div>

<div id="lln-sim"></div>
<div id="hist-container" style="margin-top:40px;">
  <input id="hist-slider" type="range" min="1" max="1000" value="1000" style="width:100%;">
  <div id="hist-lln"></div>
</div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
(function() {

  function bernoulliPaths(m, n, p) {
    const paths = [];
    for (let i = 0; i < m; i++) {
      const data = [];
      let count = 0;
      for (let t = 1; t <= n; t++) {
        if (Math.random() < p) count++;
        data.push(count / t);
      }
      paths.push(data);
    }
    return paths;
  }

  function plotLLN(p, m, n) {
    const trials = Array.from({length: n}, (_, i) => i + 1);
    const paths = bernoulliPaths(m, n, p);

    const traces = paths.map(f => ({
      x: trials,
      y: f,
      mode: "lines",
      line: {width: 1, color: "rgba(0,255,255,0.2)"},
      hoverinfo: "none"
    }));

    traces.push({
      x: [0, n],
      y: [p, p],
      mode: "lines",
      line: {color: "red", width: 3, dash: "dash"},
      name: `True Probability p = ${p}`
    });

    const layout = {
      title: `Law of Large Numbers — Relative Frequency Convergence (p=${p}, m=${m}, n=${n})`,
      xaxis: {title: "Number of Trials (n)"},
      yaxis: {title: "Relative Frequency f(n)", range: [0, 1]},
      showlegend: true,
      plot_bgcolor: "black",
      paper_bgcolor: "black",
      font: {color: "white"},
    };

    Plotly.newPlot("lln-sim", traces, layout);

    const slider = document.getElementById('hist-slider');
    slider.max = n;
    slider.value = n;

    function updateHistogram(k) {
      const values = paths.map(path => path[k]);
      const trace = {
        x: values,
        type: 'histogram',
        marker: {color: 'gold', line: {color: 'black', width: 1}},
        nbinsx: 20,
        name: `Distribution of f(n) at n=${k+1}`
      };
      const layoutHist = {
        title: `Empirical Distribution of f(n) at n=${k+1}`,
        xaxis: {title: "f(n)", range: [0, 1]},
        yaxis: {title: "Count"},
        plot_bgcolor: "black",
        paper_bgcolor: "black",
        font: {color: "white"},
      };
      Plotly.newPlot('hist-lln', [trace], layoutHist);
    }

    updateHistogram(n - 1);
    slider.oninput = (e) => updateHistogram(parseInt(e.target.value) - 1);
  }

  // Initial plot
  plotLLN(0.5, 200, 1000);

  // Regenerate on button click
  document.getElementById('generate').onclick = () => {
    const p = parseFloat(document.getElementById('prob').value);
    const n = parseInt(document.getElementById('trials').value);
    const m = parseInt(document.getElementById('paths').value);
    plotLLN(p, m, n);
  };

})();
</script>
