---
title: "Interactive Simulation of the Law of Large Numbers (LLN)"
layout: post
date: 2025-10-25
---

## Law of Large Numbers (LLN) — Interactive Simulation

The **Law of Large Numbers (LLN)** states that as the number of trials in a random experiment increases, the observed relative frequency of an event converges to its true probability.

In this interactive visualization, we simulate repeated Bernoulli trials with success probability `p` and show how the **relative frequency** across many sample paths converges toward `p` as the number of trials grows.

---

### Description

Each trajectory represents one independent sequence of Bernoulli trials.  
- `p` = true probability of success  
- `m` = number of sample paths (trajectories)  
- `n` = number of trials per path  

As `n` increases, the dispersion of relative frequencies narrows, demonstrating the **Law of Large Numbers** and, visually, hints at the **Central Limit Theorem**.

---

### Interactive Chart

Below is a **fully interactive JavaScript simulation** (runs in-browser, no backend required).  
You can adjust parameters and observe convergence in real time.

```html
<div id="lln-sim"></div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
(function() {
    const p = 0.5;       // probability of success
    const m = 200;       // number of sample paths
    const n = 1000;      // number of trials
    const trials = Array.from({length: n}, (_, i) => i + 1);

    // Generate Bernoulli sequences and relative frequencies
    function bernoulliPaths(m, n, p) {
        const paths = [];
        for (let i = 0; i < m; i++) {
            const data = [];
            let count = 0;
            for (let t = 1; t <= n; t++) {
                if (Math.random() < p) count++;
                data.push(count / t);
            }
            paths.push(data);
        }
        return paths;
    }

    const paths = bernoulliPaths(m, n, p);

    // Plot trajectories
    const traces = paths.map(f => ({
        x: trials,
        y: f,
        mode: "lines",
        line: {width: 1, color: "rgba(0, 255, 255, 0.2)"},
        hoverinfo: "none"
    }));

    // True probability reference line
    traces.push({
        x: [0, n],
        y: [p, p],
        mode: "lines",
        line: {color: "red", width: 3, dash: "dash"},
        name: "True Probability p"
    });

    const layout = {
        title: "Law of Large Numbers — Relative Frequency Convergence",
        xaxis: {title: "Number of Trials (n)"},
        yaxis: {title: "Relative Frequency f(n)", range: [0, 1]},
        showlegend: true,
        plot_bgcolor: "black",
        paper_bgcolor: "black",
        font: {color: "white"},
    };

    Plotly.newPlot("lln-sim", traces, layout);

    // Histogram on the right showing distribution at selected n
    const histDiv = document.createElement('div');
    histDiv.id = 'hist-lln';
    histDiv.style.marginTop = '40px';
    document.getElementById('lln-sim').after(histDiv);

    function updateHistogram(k) {
        const values = paths.map(path => path[k]);
        const trace = {
            x: values,
            type: 'histogram',
            marker: {color: 'gold', line: {color: 'black', width: 1}},
            nbinsx: 20,
            name: `Distribution of f(n) at n=${k+1}`
        };
        const layoutHist = {
            title: `Empirical Distribution of f(n) at n=${k+1}`,
            xaxis: {title: "f(n)", range: [0, 1]},
            yaxis: {title: "Count"},
            plot_bgcolor: "black",
            paper_bgcolor: "black",
            font: {color: "white"},
        };
        Plotly.newPlot('hist-lln', [trace], layoutHist);
    }

    // Initial histogram at n = 1000
    updateHistogram(n - 1);

    // Slider control for histogram evolution
    const slider = document.createElement('input');
    slider.type = 'range';
    slider.min = 1;
    slider.max = n;
    slider.value = n;
    slider.style.width = '100%';
    slider.oninput = (e) => updateHistogram(parseInt(e.target.value) - 1);
    histDiv.before(slider);
})();
</script>
