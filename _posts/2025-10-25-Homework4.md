---
layout: post
title: "Law of Large Numbers Simulation"
date: 2025-10-25
---

# Law of Large Numbers Simulation

## Explanation of "Converge" in the Law of Large Numbers (LLN)

we have to explain the meaning of "converge" used in "the frequency converges to the probability", why it's not a mathematical convergence, in the law of large numbers. In the LLN, "the frequency converges to the probability" means that as the number of trials \( n \) gets bigger, the relative frequency of an event gets closer to the true probability \( p \). But this isn't a strict mathematical convergence like in calculus—it’s **convergence in probability**. This means the chance that the relative frequency is far from \( p \) by more than some small number gets super tiny as \( n \) grows. Mathematically, for any \( \epsilon > 0 \),

\[ P(|f_n - p| > \epsilon) \to 0 \text{ as } n \to \infty, \]

where \( f_n \) is the relative frequency after \( n \) trials. So, it’s about probability, not a guaranteed exact match, and the sample paths can still wiggle around a bit.

---

## Simulation and Graph

this is a homework my professor has given me and this is a more formal way of putting the question

IV. Simulate the Law of Large Numbers (LLN) by plotting multiple (m) trajectories of (n) trials for the relative frequency \( f_n \). Show with a histogram (possibly, a vertically oriented histogram placed on the right side of the main chart) how, as soon a n becomes large, the empirical distribution of \( f_n \) (over all m trajectories) tends to the underlying probability \( p \) of success used in each trial.

we’re using \( m = 1000 \) trajectories, \( n = 100 \) trials, and \( p = 1/2 \) for success probability. The chart below shows the sample paths on the left and a histogram on the right to see how \( f_n \) clumps around \( p = 0.5 \) as \( n \) gets big, hinting at a Gaussian shape from the Central Limit Theorem.

{% raw %}
<canvas type="chartjs" id="llnChart">
{
  "type": "line",
  "data": {
    "datasets": [
      {
        "label": "Sample Paths",
        "data": [],
        "borderColor": "#FF6384",
        "backgroundColor": "rgba(255, 99, 132, 0.2)",
        "borderWidth": 1,
        "fill": false
      },
      {
        "label": "Histogram",
        "data": [],
        "type": "bar",
        "backgroundColor": "#36A2EB",
        "borderColor": "#36A2EB",
        "borderWidth": 1,
        "xAxisID": "histX"
      }
    ]
  },
  "options": {
    "scales": {
      "x": { "title": { "display": true, "text": "Number of Tries (n)" } },
      "y": { "title": { "display": true, "text": "Relative Frequency (f_n)" } },
      "histX": { "type": "category", position: "right", "title": { "display": true, "text": "Frequency" } }
    },
    "plugins": {
      "title": { "display": true, "text": "LLN Simulation: Trajectories and Histogram" }
    }
  }
}
</canvas>
{% endraw %}

---

## JavaScript Visualization

this is the script thing to add to my post so the chart works. it uses javascript to simulate the LLN and draw the chart when the page loads. i got help from the example at https://www.datatime.eu/public/cybersecurity/jsTutorial/19_LawOfLargeNumbers.html

{% raw %}
```html
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Wait for the DOM to load
  document.addEventListener("DOMContentLoaded", function() {
    // Simulate LLN with m trajectories and n trials
    function simulateLLN(m, n, p) {
      const trajectories = [];
      for (let i = 0; i < m; i++) {
        let successes = 0;
        const path = [];
        for (let j = 1; j <= n; j++) {
          successes += Math.random() < p ? 1 : 0;
          path.push({ x: j, y: successes / j });
        }
        trajectories.push(path);
      }
      return trajectories;
    }

    // Generate histogram data
    function getHistogramData(frequencies, binSize = 0.02) {
      const hist = {};
      for (let f of frequencies) {
        const bin = Math.floor(f / binSize) * binSize;
        hist[bin] = (hist[bin] || 0) + 1;
      }
      return Object.entries(hist).map(([x, y]) => ({ x: Number(x) + binSize / 2, y }));
    }

    // Parameters
    const m = 1000, n = 100, p = 0.5;
    const data = simulateLLN(m, n, p);
    const finalFrequencies = data.map(path => path[n-1].y);
    const histData = getHistogramData(finalFrequencies);

    // Get the chart canvas and configure it
    const ctx = document.getElementById("llnChart").getContext("2d");
    new Chart(ctx, {
      type: "line", // Base type, but includes bar for histogram
      data: {
        datasets: [
          {
            label: "Sample Paths",
            data: data[0], // Show one sample path for simplicity; extend for all if performance allows
            borderColor: "#FF6384",
            backgroundColor: "rgba(255, 99, 132, 0.2)",
            borderWidth: 1,
            fill: false
          },
          {
            label: "Histogram",
            data: histData,
            type: "bar",
            backgroundColor: "#36A2EB",
            borderColor: "#36A2EB",
            borderWidth: 1,
            xAxisID: "histX"
          }
        ]
      },
      options: {
        scales: {
          x: { title: { display: true, text: "Number of Tries (n)" } },
          y: { title: { display: true, text: "Relative Frequency (f_n)" } },
          histX: { type: "category", position: "right", title: { display: true, text: "Frequency" } }
        },
        plugins: {
          title: { display: true, text: "LLN Simulation: Trajectories and Histogram" }
        }
      }
    });
  });
</script>
